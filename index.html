<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Star Rating with Alpine.js</title>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <style>
      body {
        font-family: system-ui, sans-serif;
        padding: 2rem;
        background: #f9f9f9;
      }
      .star-button {
        font-size: 2rem;
        background: none;
        border: none;
        cursor: pointer;
      }
      .highlight {
        color: #facc15;
      }
      .dimmed {
        color: #d1d5db;
      }
      .gap {
        display: flex;
        gap: 0.5rem;
      }
    </style>
  </head>
  <body>
    <h1>Star Rating Example</h1>

    <div x-data="{ rating: 3, rating2: 4 }">
      <div x-data="starRating({  })" x-modelable="value" x-model="rating" class="gap">
        <template x-for="i in max" :key="i">
          <button
            type="button"
            @click="value = i"
            @mouseenter="hover = i"
            @mouseleave="hover = null"
            :class="i <= (hover ?? value) ? 'highlight' : 'dimmed'"
            class="star-button"
          >
            &#9733;
          </button>
        </template>
      </div>

      <div x-data="starRating({})" x-modelable="value" x-model="rating2" class="gap">
        <template x-for="i in max" :key="i">
          <button
            type="button"
            @click="value = i"
            @mouseenter="hover = i"
            @mouseleave="hover = null"
            :class="i <= (hover ?? value) ? 'highlight' : 'dimmed'"
            class="star-button"
          >
            &#9733;
          </button>
        </template>
      </div>
      <p style="margin-top: 1rem">Current rating: <span x-text="rating"></span> stars</p>
      <p style="margin-top: 1rem">Current rating: <span x-text="rating2"></span> stars</p>
    </div>

    <script>
      document.addEventListener("alpine:init", () => {
        Alpine.data("starRating", ({ max = 5 }) => ({
          max,
          value: 0,
          hover: null
        }));
      });
    </script>
  </body>
</html>
